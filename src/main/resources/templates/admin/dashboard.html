<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/base::layout(~{::section})}">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <!-- Load Google Charts library -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
    <section class="center">

        <h1>Admin Dashboard</h1>

        <div th:if="${session.msg}">
            <h3 th:text="${session.msg}" style="color:red"></h3>
            <h3 th:text="${session.msg}" style="color:red"></h3>
        </div>

        <h3>Candidate 1 : Total Votes = <b style="color: limegreen"><span th:text="${c1}"></span></b></h3>
        <h3>Candidate 2 : Total Votes = <b style="color: limegreen"><span th:text="${c2}"></span></b></h3>
        <h3>Candidate 3 : Total Votes = <b style="color: limegreen"><span th:text="${c3}"></span></b></h3>
        <h3>Candidate 4 : Total Votes = <b style="color: limegreen"><span th:text="${c4}"></span></b></h3>

        <!-- Add a container div for the bar chart -->
        <div id="voteChart" style="height: 400px;"></div>
    </section>

    <!-- Script block for generating the bar chart -->
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            // Get the data for the chart from Thymeleaf variables
            var c1Votes = 10;
            var c2Votes = 20;
            var c3Votes =40;
            var c4Votes = 30;
            
            
            

            // Create the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Candidate');
            data.addColumn('number', 'Total Votes');
            data.addRows([
                ['Candidate 1', c1Votes],
                ['Candidate 2', c2Votes],
                ['Candidate 3', c3Votes],
                ['Candidate 4', c4Votes]
            ]);

            // Set chart options
            var options = {
                title: 'Candidate Votes',
                vAxis: {title: 'Total Votes'},
                hAxis: {title: 'Candidate'},
                legend: 'none'
            };

            // Instantiate and draw the chart
            var chart = new google.visualization.ColumnChart(document.getElementById('voteChart'));
            chart.draw(data, options);
        }
    </script>
</body>
</html>
